<%- include('../shared/header') %>

    <div class="container">
        <button id="run-btn">Run</button>
        <div class="container">
            <code>function foo(){</code>
            <code>
        <pre id="code" contenteditable="true" style="border:1px solid black;">
            console.log(1)
        </pre>
    </code>
            <code>}</code>
            <div class="container">
                <p>Output</p>
                <div id="output">

                </div>
            </div>
        </div>
        <code>
            <div id="editor" style="width: 500px; height: 100px;">
                </div>
        </code>
    </div>
    <!-- <script src="../src/ace.js" type="text/javascript" charset="utf-8"></script> -->
    <script>
        // var editor = ace.edit("editor");
        // editor.session.setTabSize(2);
        // editor.session.setUseSoftTabs(true);
        // editor.session.setUseWrapMode(true);
        // let s =  ace.createEditSession(["function foo(){", "css", "}"]);
        // editor.setSession(s);
        // editor.setTheme("ace/theme/monokai");
        // editor.session.setMode("ace/mode/javascript");
        // editor.resize()
        // console.log($('.ace_text-layer').html(""));
        // editor.session.replace(new ace.Range(0, 0, 1, 0), "new text");
        $('#run-btn').click(function () {
            console.log(editor.session.getTextRange(editor.getSelectionRange())); 
            console.log($('.ace_line:last-child'));
            let f = new Function(document.getElementById("code").innerText);
            var logger = document.getElementById('output');
            logger.innerHTML = "";
            if (!console) {
                console = {};
            }
            var old = console.log;
            console.log = function (message) {
                if (typeof message == 'object') {
                    logger.innerHTML += (JSON && JSON.stringify ? JSON.stringify(message) : String(message)) + '<br />';
                } else {
                    logger.innerHTML += message + '<br />';
                }
            }
            f()

        })
    </script>

    <%- include('../shared/footer') %>